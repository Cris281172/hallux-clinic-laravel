import{c as F}from"./createLucideIcon-eJA8dgrf.js";import{j as e,r as o,Y as D}from"./app-BftRUR-1.js";import{c as Z,b as y}from"./button-BwfzrTOi.js";import{c,u as b,b as H}from"./index-kuGHw10J.js";import{G as w}from"./iconBase-CmTXln1Y.js";import{I as Y}from"./index-VjK7pq7q.js";import{a as q}from"./index-CCk3feWG.js";import{T as j}from"./index-CtBsO7PD.js";import{f as N,S as J}from"./status-visit-Q1Q2ZJcp.js";import{S as K,a as Q,b as U,c as X,d as ee,e as te}from"./select-B3krrf5X.js";import{S as ae}from"./status-patient-DWCmeOid.js";import{c as se,a as re}from"./index-CWY55Mf-.js";import{f as S,R as le,T as oe,W as ie,C as ne,g as ce,h as de,i as _,P as ue,O as ge}from"./dialog-_uLIKa5e.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],Ke=F("Ban",me),xe=Z("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Qe({className:t,variant:a,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:c(xe({variant:a}),t),...s})}function Ue({className:t,...a}){return e.jsx("div",{"data-slot":"alert-title",className:c("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function pe(t){return w({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Clock_2"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12,21.933A9.933,9.933,0,1,1,21.933,12,9.944,9.944,0,0,1,12,21.933ZM12,3.067A8.933,8.933,0,1,0,20.933,12,8.943,8.943,0,0,0,12,3.067Z"},child:[]},{tag:"path",attr:{d:"M18,12.5H12a.429.429,0,0,1-.34-.14c-.01,0-.01-.01-.02-.02A.429.429,0,0,1,11.5,12V6a.5.5,0,0,1,1,0v5.5H18A.5.5,0,0,1,18,12.5Z"},child:[]}]}]}]})(t)}function fe(t){return w({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Phone"},child:[{tag:"path",attr:{d:"M14.436,20.938A11.384,11.384,0,0,1,4.572,3.9a1.668,1.668,0,0,1,1.241-.822,1.716,1.716,0,0,1,1.454.492l3.139,3.14a1.715,1.715,0,0,1,0,2.427l-.295.3a1.937,1.937,0,0,0,0,2.736l1.72,1.721a1.983,1.983,0,0,0,2.736,0l.29-.29a1.719,1.719,0,0,1,2.428,0l3.139,3.139a1.724,1.724,0,0,1,.492,1.455,1.669,1.669,0,0,1-.822,1.239A11.327,11.327,0,0,1,14.436,20.938ZM6.042,4.063a.793.793,0,0,0-.1.006.673.673,0,0,0-.5.331A10.375,10.375,0,0,0,19.594,18.567a.674.674,0,0,0,.331-.5.734.734,0,0,0-.208-.618l-3.139-3.139a.717.717,0,0,0-1.014,0l-.29.29a3.006,3.006,0,0,1-4.15,0L9.4,12.876a2.939,2.939,0,0,1,0-4.149l.3-.3a.717.717,0,0,0,0-1.014L6.56,4.277A.729.729,0,0,0,6.042,4.063Z"},child:[]}]}]})(t)}const Xe=({patient:t})=>{const[a,s]=o.useState([]),[r,i]=o.useState(1),[u,m]=o.useState(null),[x,f]=o.useState(!1),n=o.useRef(null),h=async(l=1)=>{if(!(x||u&&l>u)){f(!0);try{const v=await(await fetch(j("api.dashboard.visits.get.all.patient.visits",{id:t.id,page:l}))).json();s(G=>[...G,...v.visits.data]),i(v.visits.current_page),m(v.visits.last_page)}catch(g){console.error("Błąd podczas pobierania wizyt:",g)}finally{f(!1)}}};o.useEffect(()=>{h()},[]),o.useEffect(()=>{const l=new IntersectionObserver(g=>{g[0].isIntersecting&&!x&&r<u&&h(r+1)},{threshold:1});return n.current&&l.observe(n.current),()=>{n.current&&l.unobserve(n.current)}},[r,u,x]);const[A,L]=o.useState(null),W=[{icon:e.jsx(Y,{}),text:`Data urodzenia: ${t.birth_date?N(t.birth_date):"Brak"}`},{icon:e.jsx(fe,{}),text:`Numer telefonu: ${t.phone?t.phone:"Brak"}`},{icon:e.jsx(q,{}),text:`Email: ${t.email?t.email:"Brak"}`}];return e.jsxs("div",{className:"flex max-h-[500px] gap-5",children:[e.jsxs("div",{className:"flex w-13/32 flex-col gap-5",children:[e.jsxs("div",{className:"rounded-2xl border-1 p-4",children:[e.jsx("p",{className:"font-bold",children:"Dane osobowe"}),e.jsxs("div",{className:"mt-1 mb-3 flex items-center gap-5",children:[e.jsxs("h3",{className:"text-xl font-bold",children:[t.name," ",t.surname]}),e.jsx(ae,{status:t.status})]}),e.jsx("ul",{children:W.map((l,g)=>e.jsxs("li",{className:"flex items-center gap-1",children:[l.icon,e.jsx("p",{children:l.text})]},g))}),e.jsx(D,{href:j("dashboard.patient.edit.view",t.id),className:"mt-2 flex underline",children:"Edytuj dane"})]}),e.jsxs("div",{className:"rounded-2xl border-1 p-4",children:[e.jsx("p",{className:"font-bold",children:"Statystyki"}),e.jsxs("ul",{className:"mt-1",children:[e.jsx("li",{className:"flex items-center",children:e.jsxs("p",{children:["Liczba wizyt: ",t.totalVisits?t.totalVisits:0]})}),e.jsx("li",{className:"flex items-center",children:e.jsxs("p",{children:["Ostatnia wizyta: ",t.lastVisit?t.lastVisit.date:"Brak"]})}),e.jsx("li",{className:"flex items-center",children:e.jsxs("p",{children:["Następna wizyta: ",t.upcomingVisit?t.upcomingVisit.date:"Brak"]})})]})]})]}),e.jsxs("div",{className:"max-h-full w-19/32 overflow-y-scroll rounded-2xl border-1 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"text-xl text-green-700"}),e.jsx("p",{className:"text-xl font-bold",children:"Wizyty"})]}),e.jsx("div",{className:"grid items-center gap-1.5",children:e.jsxs(K,{defaultValue:"all",onValueChange:l=>setData("statusID",l),children:[e.jsx(Q,{className:"w-[200px]",children:e.jsx(U,{placeholder:"Wybierz status wizyty"})}),e.jsx(X,{children:e.jsx(ee,{children:e.jsx(te,{value:"all",children:"Wszystkie"})})})]})})]}),e.jsxs("div",{className:"mt-8 flex flex-col gap-8",children:[a.map((l,g)=>e.jsx("div",{className:"border-l-6 pl-2",children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{children:N(l.date)}),e.jsx(J,{status:l.status})]}),e.jsxs("div",{className:"mt-2 w-full max-w-[500px] overflow-hidden",children:[e.jsx("p",{className:`${A===l.id?"":"truncate"} text-sm break-words`,children:l.description?l.description:"Brak opisu"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{onClick:()=>L(v=>v===l.id?null:l.id),className:`underline ${l.description?"":"invisible"}`,children:A===l.id?"Schowaj":"Pokaż więcej"}),e.jsx(D,{href:j("dashboard.visit.edit.view",l.id),className:"underline",children:"Edytuj"})]})]})]})},g)),x&&e.jsx("div",{className:"animate-pulse py-4 text-center text-gray-500",children:"Ładowanie kolejnych wizyt..."}),e.jsx("div",{ref:n})]})]})]})};var C="AlertDialog",[he,et]=se(C,[S]),d=S(),P=t=>{const{__scopeAlertDialog:a,...s}=t,r=d(a);return e.jsx(le,{...r,...s,modal:!0})};P.displayName=C;var ve="AlertDialogTrigger",E=o.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,i=d(s);return e.jsx(oe,{...i,...r,ref:a})});E.displayName=ve;var je="AlertDialogPortal",R=t=>{const{__scopeAlertDialog:a,...s}=t,r=d(a);return e.jsx(ue,{...r,...s})};R.displayName=je;var Ae="AlertDialogOverlay",T=o.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,i=d(s);return e.jsx(ge,{...i,...r,ref:a})});T.displayName=Ae;var p="AlertDialogContent",[De,Ne]=he(p),ye=H("AlertDialogContent"),O=o.forwardRef((t,a)=>{const{__scopeAlertDialog:s,children:r,...i}=t,u=d(s),m=o.useRef(null),x=b(a,m),f=o.useRef(null);return e.jsx(ie,{contentName:p,titleName:k,docsSlug:"alert-dialog",children:e.jsx(De,{scope:s,cancelRef:f,children:e.jsxs(ne,{role:"alertdialog",...u,...i,ref:x,onOpenAutoFocus:re(i.onOpenAutoFocus,n=>{var h;n.preventDefault(),(h=f.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:n=>n.preventDefault(),onInteractOutside:n=>n.preventDefault(),children:[e.jsx(ye,{children:r}),e.jsx(we,{contentRef:m})]})})})});O.displayName=p;var k="AlertDialogTitle",I=o.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,i=d(s);return e.jsx(ce,{...i,...r,ref:a})});I.displayName=k;var M="AlertDialogDescription",$=o.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,i=d(s);return e.jsx(de,{...i,...r,ref:a})});$.displayName=M;var be="AlertDialogAction",z=o.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,i=d(s);return e.jsx(_,{...i,...r,ref:a})});z.displayName=be;var V="AlertDialogCancel",B=o.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,{cancelRef:i}=Ne(V,s),u=d(s),m=b(a,i);return e.jsx(_,{...u,...r,ref:m})});B.displayName=V;var we=({contentRef:t})=>{const a=`\`${p}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${p}\` by passing a \`${M}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${p}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},Se=P,_e=E,Ce=R,Pe=T,Ee=O,Re=z,Te=B,Oe=I,ke=$;function tt({...t}){return e.jsx(Se,{"data-slot":"alert-dialog",...t})}function at({...t}){return e.jsx(_e,{"data-slot":"alert-dialog-trigger",...t})}function Ie({...t}){return e.jsx(Ce,{"data-slot":"alert-dialog-portal",...t})}function Me({className:t,...a}){return e.jsx(Pe,{"data-slot":"alert-dialog-overlay",className:c("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function st({className:t,...a}){return e.jsxs(Ie,{children:[e.jsx(Me,{}),e.jsx(Ee,{"data-slot":"alert-dialog-content",className:c("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function rt({className:t,...a}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:c("flex flex-col gap-2 text-center sm:text-left",t),...a})}function lt({className:t,...a}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:c("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function ot({className:t,...a}){return e.jsx(Oe,{"data-slot":"alert-dialog-title",className:c("text-lg font-semibold",t),...a})}function it({className:t,...a}){return e.jsx(ke,{"data-slot":"alert-dialog-description",className:c("text-muted-foreground text-sm",t),...a})}function nt({className:t,...a}){return e.jsx(Re,{className:c(y(),t),...a})}function ct({className:t,...a}){return e.jsx(Te,{className:c(y({variant:"outline"}),t),...a})}export{tt as A,Ke as B,Xe as D,at as a,st as b,rt as c,ot as d,it as e,lt as f,ct as g,nt as h,Qe as i,Ue as j};
