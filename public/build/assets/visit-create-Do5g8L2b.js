import{q as I,v as V,r as m,j as e}from"./app-BftRUR-1.js";import{f as C,F as u}from"./formatToMySQLDateTime-CHIxrpGQ.js";import{B as F}from"./button-BwfzrTOi.js";import{I as T}from"./input-GpzuGi3d.js";import{L as t}from"./label-CKH2UcpX.js";import{S as h,a as p,b as x,c as j,d as f,e as g}from"./select-B3krrf5X.js";import{T as E}from"./textarea-ChRZRWk6.js";import{D as L}from"./datetime-visit-6JyW4yZJ.js";const K=({children:v,patientID:l,statuesVisit:y,onSuccess:w,users:d})=>{const{props:D}=I(),c=D.auth.user.id,{data:a,setData:r,post:S,errors:o}=V({description:"",patientID:l,date:void 0,statusID:"1",price:"",userID:d.find(s=>s.id===c)?c:""}),[b,n]=m.useState([]);m.useEffect(()=>{r("patientID",l)},[l]);const z=s=>{s.preventDefault(),S(route("dashboard.visit.create"),{onSuccess:()=>w()})},N=s=>{r("userID",s),r("date",void 0),n([])};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"px-4",onSubmit:z,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(t,{htmlFor:"date",children:"Data i godzina wizyty"}),e.jsx(L,{selected:a.date?new Date(a.date):null,data:a,onChange:s=>r("date",C(s)),setAvailableTimes:n,availableTimes:b}),e.jsx(u,{id:"date-error",message:o.date})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(t,{htmlFor:"age",children:"Status wizyty"}),e.jsxs(h,{defaultValue:a.statusID,onValueChange:s=>r("statusID",s),children:[e.jsx(p,{className:"w-full",children:e.jsx(x,{placeholder:"Wybierz status wizyty"})}),e.jsx(j,{children:e.jsx(f,{children:y.map((s,i)=>e.jsx(g,{value:`${s.id}`,children:s.name},i))})})]})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(t,{htmlFor:"phone",children:"Opis wizyty"}),e.jsx(E,{value:a.description,onChange:s=>r("description",s.target.value),placeholder:"Podaj opis wizyty",id:"description"})]}),e.jsxs("div",{className:"flex w-full flex-col gap-1.5",children:[e.jsx(t,{children:"Lekarz"}),e.jsxs(h,{defaultValue:`${a.userID}`,onValueChange:N,children:[e.jsx(p,{className:"w-full",children:e.jsx(x,{placeholder:"Wybierz lekarza"})}),e.jsx(j,{children:e.jsx(f,{children:d.map((s,i)=>e.jsx(g,{value:`${s.id}`,children:s.name},i))})})]}),e.jsx(u,{id:"surname-error",message:o.userID})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(t,{htmlFor:"price",children:"Kod"}),e.jsx(T,{value:a.price,onChange:s=>r("price",s.target.value),type:"text",id:"price",placeholder:"Podaj kod"})]})]}),e.jsx(F,{disabled:!l,type:"submit",className:"mt-5",children:"Dodaj wizytÄ™"})]}),v]})};export{K as V};
